## 目录

- [Java并行程序基础](#Java并行程序基础)
    - [概念](#概念)
        - [临界区](#临界区)
        - [阻塞](#阻塞)
        - [死锁、饥饿、活锁](#死锁、饥饿、活锁)
        - [进程](#进程)
        - [线程](#线程)
    - [Java内存模型JMM](#Java内存模型JMM)
        - [原子性](#原子性)
        - [可见性](#可见性)
        - [有序性](#有序性)
    - [线程的生命周期与状态](#线程的生命周期与状态)
    - [线程的基本操作](#线程的基本操作)
        - [新建线程](#新建线程)
        - [终止线程](#终止线程)
        - [线程中断](#线程中断)
        - [等待(wait)和通知(notify)](#等待(wait)和通知(notify))
        - [挂起(suspend)和继续执行(resume)](#挂起(suspend)和继续执行(resume))
        - [等待线程结束(join)和谦让(yield)](#等待线程结束(join)和谦让(yield))
    - [volatile](#Volatile)
    - [守护线程(Daemon)](#守护线程(Daemon))
    - [线程优先级](#线程优先级)
    - [线程安全与synchronized](#线程安全与synchronized)
- [JKD并发包](#JKD并发包)
    - [同步控制](#同步控制)


## Java并行程序基础


### 概念

#### 临界区

表示一种公共资源/共享数据，每次只能有一个线程使用。

#### 阻塞

临界区资源被占用，导致其他线程挂起等待。

#### 死锁、饥饿、活锁

* 死锁：互相占用对方需要的资源不释放
* 饥饿：线程因为种种原因无法获得资源，如优先级太低
* 活锁：资源不断在线程间跳动，而没有一个线程可以同时拿到所有资源

#### 进程

操作系统进行资源分配、调度的基本单位。

#### 线程

轻量级进程，在进程内分配资源、调度的基本单位。多线程共享进程的堆、方法区，线程私有程序计数器、虚拟机栈、本地方法栈。


### Java内存模型JMM

#### 原子性

一系列操作不可中断，视为一个基本单位。(32位系统中，64位long型数据的读写不是原子性)

#### 可见性

当一个线程修改了共享变量的值，其他线程可立即知道这个修改。

#### 有序性

指令重排序。


### 线程的生命周期与状态

![线程的生命周期与状态](../picture/thread/thead状态.png)
* NEW新建
* RUNNABLE运行
* BLOCKED遇到snchronized同步块，进入阻塞状态
* WAITING/TIMED_WAITING等待
* TERMINATED终止


### 线程的基本操作

#### 新建线程

新建线程调用start(),start方法会执行run()。  
直接调用run()是在当前线程中把run当做普通方法调用，没有开启新线程。

#### 终止线程

* 执行完毕后正常结束
* Thread.stop()：强行终止线程，释放线程持有的锁

#### 线程中断

Thread.interrupt()不会使线程立即退出，而是给线程发送退出通知(设置中断标志位)，线程收到通知后自行处理。

#### 等待(wait)和通知(notify)

一个线程调用object.wait()，线程会进入object对象的等待队列，当object.notify()被调用时，从等待队列随机唤醒一个线程。

#### 挂起(suspend)和继续执行(resume)

Thread.suspend()不释放锁。

#### 等待线程结束(join)和谦让(yield)

* join：新建并加入当前线程，让当前线程等待(当前对象调用wait())。
* yield：使当前线程让出CPU


### Volatile

保证单个操作的原子性、数据的可见性、指令的有序性。


### 守护线程(Daemon)

Thread.setDaemon()在后台完成系统性的服务。


### 线程优先级

Thread.setPriority()


### 线程安全与synchronized

保证执行结果的正确性。  
synchronized实现线程间的同步，对同步的代码加锁，使得每次只有一个线程进入同步块。
* 指定对象加锁
* 作用于实例方法
* 作用于静态方法


## JKD并发包

### 同步控制

 