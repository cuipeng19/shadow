## 目录

- [事务](#事务)
    - [传播行为](#传播行为)
    - [隔离级别](#隔离级别)
- [索引](#索引)
    - [优点](#优点)
    - [缺点](#缺点)
    - [索引如何提高查询速度](#索引如何提高查询速度)
- [三次握手与四次挥手](#三次握手与四次挥手)
    - [建立连接三次握手](#建立连接三次握手)
    - [关闭连接四次挥手](#关闭连接四次挥手)


## 事务

### 传播行为

methodA事务方法调用methodB事务方法，methodB的事务传播行为决定methodB的事务如何运行。

* PROPAGATION_REQUIRED：当前事务存在，则加入该事务，不存在则新建事务。
* PROPAGATION_SUPPORTS：当前事务存在，则加入该事务，不存在则以非事务方式继续运行
* PROPAGATION_MANDATORY：当前事务存在，则加入该事务，不存在则抛异常。
* PROPAGATION_REQUIRES_NEW：创建新事务，当前事务存在则挂起。
* PROPAGATION_NOT_SUPPORTED：以非事务方式运行，当前事务存在则挂起。
* PROPAGATION_NEVER：以非事务方式运行，当前事务存在则抛异常。
* PROPAGATION_NESTED：嵌套新建事务。

### 隔离级别

* 读未提交，有脏读问题。
* 读已提交，写加行锁，解决脏读问题，有不可重复读问题。
* 可重复读，读加行锁，解决不可重复读问题，有幻读问题。
* 序列化，加表锁，解决幻读问题。

脏读：直接读数据，其他的一个transaction才写了一半的数据也可以读出来。  
不可重复读：在同一个transaction里面执行两次读，别人在中间写数据，两次读出来不一致。  
幻读：在同一个transaction里面执行两次select * from table，别人在中间新增数据，第二次比第一次读的多。


## 索引

### 优点

* 加快数据的检索速度
* 唯一索引保证数据的唯一性
* 加快表和表之间的连接

### 缺点

* 创建和维护索引会耗时，耗时随数据量增大而增大
* 索引占据物理空间

### 索引如何提高查询速度

将无序的数据变成相对有序的数据。


## 三次握手与四次挥手

### 建立连接三次握手

客户端–发送数据包  
服务端–发送ACK标志的数据包  
客户端–回复带有ACK标志的数据包

### 关闭连接四次挥手

客户端-发送关闭请求  
服务端-收到客户端的关闭请求，未关闭(数据未传输完毕)  
服务端-发送ACK确认关闭  
客户端-确认收到ACK